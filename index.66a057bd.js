var i,r,e,t,n,d,o,s;i=new(function(){var i;function r(){(function(i,r){if(!(i instanceof r))throw TypeError("Cannot call a class as a function")})(this,r),this.gridSize=4,this.grid=this.createEmptyGrid(),this.score=0}return i=[{key:"createEmptyGrid",value:function(){var i=this;return Array.from({length:this.gridSize},function(){return Array(i.gridSize).fill(null)})}},{key:"addRandomTile",value:function(){for(var i=[],r=0;r<this.gridSize;r++)for(var e=0;e<this.gridSize;e++)null===this.grid[r][e]&&i.push({row:r,col:e});if(i.length>0){var t=i[Math.floor(Math.random()*i.length)],n=t.row,d=t.col;this.grid[n][d]=.9>Math.random()?2:4}}},{key:"isFull",value:function(){for(var i=0;i<this.gridSize;i++)for(var r=0;r<this.gridSize;r++)if(null===this.grid[i][r])return!1;return!0}},{key:"reset",value:function(){this.grid=this.createEmptyGrid(),this.score=0,this.addRandomTile(),this.addRandomTile()}},{key:"move",value:function(i){for(var r=this,e=!1,t=[],n=0;n<this.gridSize;n++)t[n]=Array(this.gridSize).fill(!1);var d=function(i,n,d,o){null===r.grid[d][o]?(r.grid[d][o]=r.grid[i][n],r.grid[i][n]=null,e=!0):r.grid[d][o]!==r.grid[i][n]||t[d][o]||(r.grid[d][o]*=2,r.score+=r.grid[d][o],r.grid[i][n]=null,t[d][o]=!0,e=!0)};if("up"===i)for(var o=0;o<this.gridSize;o++)!function(i){for(var e=0;e<r.gridSize;e++)if(null!==r.grid[e][i])for(var t=e;t>0;)(null===r.grid[t-1][i]||r.grid[t-1][i]===r.grid[t][i])&&d(t,i,t-1,i),t--}(o);else if("down"===i){for(var s=0;s<this.gridSize;s++)for(var a=this.gridSize-1;a>=0;a--)if(null!==this.grid[a][s])for(var l=a;l<this.gridSize-1;)(null===this.grid[l+1][s]||this.grid[l+1][s]===this.grid[l][s])&&d(l,s,l+1,s),l++}else if("left"===i)for(var g=0;g<this.gridSize;g++)!function(i){for(var e=0;e<r.gridSize;e++)if(null!==r.grid[i][e])for(var t=e;t>0;)(null===r.grid[i][t-1]||r.grid[i][t-1]===r.grid[i][t])&&d(i,t,i,t-1),t--}(g);else if("right"===i){for(var u=0;u<this.gridSize;u++)for(var h=this.gridSize-1;h>=0;h--)if(null!==this.grid[u][h])for(var f=h;f<this.gridSize-1;)(null===this.grid[u][f+1]||this.grid[u][f+1]===this.grid[u][f])&&d(u,f,u,f+1),f++}e&&this.addRandomTile()}},{key:"hasWon",value:function(){for(var i=0;i<this.gridSize;i++)for(var r=0;r<this.gridSize;r++)if(2048===this.grid[i][r])return!0;return!1}},{key:"isGameOver",value:function(){if(!this.isFull())return!1;for(var i=0;i<this.gridSize;i++)for(var r=0;r<this.gridSize;r++)if(r<this.gridSize-1&&this.grid[i][r]===this.grid[i][r+1]||i<this.gridSize-1&&this.grid[i][r]===this.grid[i+1][r])return!1;return!0}},{key:"getGrid",value:function(){return this.grid}},{key:"getScore",value:function(){return this.score}}],function(i,r){for(var e=0;e<r.length;e++){var t=r[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(i,t.key,t)}}(r.prototype,i),r}()),r=document.querySelector(".start"),e=document.querySelector(".game-field"),t=document.querySelector(".game-score"),n=document.querySelector(".message-start"),d=document.querySelector(".message-win"),o=document.querySelector(".message-lose"),s=function(){for(var r=i.getGrid(),n=0;n<r.length;n++)for(var d=0;d<r[n].length;d++){var o=e.rows[n].cells[d],s=r[n][d];o.textContent=s||"",o.className="field-cell",s&&o.classList.add("field-cell--".concat(s))}t.textContent=i.getScore()},r.addEventListener("click",function(){i.reset(),s(),n.classList.add("hidden"),d.classList.add("hidden"),o.classList.add("hidden")}),document.addEventListener("keydown",function(r){var e=r.key;"ArrowUp"===e?i.move("up"):"ArrowDown"===e?i.move("down"):"ArrowLeft"===e?i.move("left"):"ArrowRight"===e&&i.move("right"),s(),i.hasWon()?d.classList.remove("hidden"):i.isGameOver()&&o.classList.remove("hidden")});
//# sourceMappingURL=index.66a057bd.js.map
